{{if comics:}}
  <div class="row">
  {{for i, comic in enumerate(comics):}}
    {{if i % 3 == 0:}}
  </div>
  <div class="row">
  {{pass}}

    <div class="col-md-4">
      <div class="panel panel-default comic-preview">
        <div class="panel-heading">
        {{if 'box' in response._vars and auth.user and box.owner.id == auth.user.id and not box.is_unfiled:}}
          <form action="{{=URL('box', 'remove_comic')}}" method="post">
            <input type="hidden" name="box" value="{{=box.id}}">
            <input type="hidden" name="comic" value="{{=comic.id}}">

            <button type="submit" class="close" title="Remove comic from box">
              &times;
            </button>
          </form>
        {{pass}}

          <h4 class="panel-title">{{=comic.full_name}}</h4>

          {{for box in comic.boxes:}}
            <a href="{{=box.url}}" class="label label-primary">
              {{if box.private:}}
                <span class="glyphicon glyphicon-lock"></span>
              {{pass}}

              {{=box.name}}
            </a>
          {{pass}}
        </div>

        <ul class="list-group">
          <li class="list-group-item comic-preview-cover-list-group-item">
            <a class="comic-preview-cover-container" href="{{=comic.url}}">
              <img class="comic-preview-cover" src="{{=comic.cover_url}}">
            </a>
          </li>

          <a class="list-group-item" href="{{=comic.url}}">
            <span class="glyphicon glyphicon-expand"></span>
            More information
          </a>

        {{collection_view_url = URL('collection', 'view', args=[comic.owner.id])}}

        {{if collection_view_url not in request.url:}}
          <a class="list-group-item" href="{{=collection_view_url}}">
            <span class="glyphicon glyphicon-user"></span>
            View <em>{{=comic.owner.screen_name}}</em>'s collection
          </a>
        {{pass}}
        </ul>
      </div>
    </div>
  {{pass}}
  </div>
{{else:}}
  <p class="text-muted">No comics to display.</p>
{{pass}}
